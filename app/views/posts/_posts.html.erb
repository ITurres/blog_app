<% posts.each_with_index do |post, index| %>
    <div class="card">

      <%= link_to user_post_path(post.author, post), class: "text-decoration-none" do %>
        <div class="card-header">
          <span><strong>Post #<%= index + 1 %></strong></span>
        </div>

        <div class="card-body">
          <h5 class="card-title"><%= post.title %></h5>
          <p class="card-text"><%= truncate_n.nil? ? post.text : post.text.truncate(truncate_n) %></p>
        </div>

        <div class="text-muted pt-1 pb-2 pr-3" style="text-align: end;">
          <span>Comments: <%= post.comments_counter %></span>,
          <span>Likes: <%= post.likes_counter %></span>
        </div>
      <% end %>
    </div>

    <% if post.most_recent_comments.any? %>
      <div class="card card-body mt-1 mb-3 p-3">
        <ul class="list-unstyled">

          <% post.most_recent_comments(limit_n).each do |comment| %>
            <li><%= comment.author.name %>: <%= comment.text %></li>
          <% end %>

        </ul>
      </div>
    <% end %>
<% end %>